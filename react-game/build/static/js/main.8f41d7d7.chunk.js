(this["webpackJsonpreact-game"]=this["webpackJsonpreact-game"]||[]).push([[0],[,,,,,,,,function(e,t,n){},,,,,,,,,function(e,t,n){},function(e,t,n){},,function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";n.r(t);var c=n(1),a=n.n(c),s=n(9),i=n.n(s),r=(n(17),n(18),n(0));var o=function(){return Object(r.jsx)("div",{className:"Header",children:Object(r.jsx)("h1",{className:"title",children:"Apple Jam"})})},l=n(2),u=(n(20),n(12)),d=(n(21),n(10)),j=n(11),b=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e3;Object(d.a)(this,e),this.cadence=n,this.isPaused=!0,this.callback=t,this.timerID=void 0}return Object(j.a)(e,[{key:"_run",value:function(){this.isPaused||(this.callback(),this.timerID=setTimeout(this._run.bind(this),this.cadence))}},{key:"start",value:function(){this.isPaused&&(this.isPaused=!1,this._run())}},{key:"stop",value:function(){this.isPaused=!0,clearTimeout(this.timerID)}},{key:"toggle",value:function(){return this.isPaused?(this.start(),!0):(this.stop(),!1)}},{key:"setCadence",value:function(e){this.cadence=e}},{key:"getCadence",value:function(){return this.cadence}},{key:"setCallback",value:function(e){this.callback=e}}]),e}(),O=(n(22),{green:n.p+"static/media/appleGreen.1a01bfb4.svg",red:n.p+"static/media/appleRed.8f1c4e77.svg",yellow:n.p+"static/media/appleYellow.e55b6d4d.svg"});var f=function(e){return Object(r.jsx)("div",{className:"Apple ".concat(e.trajectory),onAnimationEnd:e.onAnimationEnd,"data-key":e.dataKey,children:Object(r.jsx)("img",{className:"apple-image",src:O[e.color],alt:"apple"})})},m=(n(23),n.p+"static/media/cutting-board.c02faeb4.svg"),h=a.a.createContext();var v=function(e){var t=Object(c.useState)(0),n=Object(l.a)(t,2),a=n[0],s=n[1],i=Object(c.useState)(!1),o=Object(l.a)(i,2),u=o[0],d=o[1],j=Object(c.useContext)(h).pause,b=Object(c.useContext)(h).active,O=Object(c.useState)(0),f=Object(l.a)(O,2),v=f[0],g=f[1];return Object(c.useEffect)((function(){function e(e){if(b&&!j&&!u){d(!0);var t=a;37===e.keyCode?t=(t-=9)<0?0:t:39===e.keyCode&&(t=(t+=9)>v?v:t),a!==t&&s(t)}}function t(){d(!1)}return window.addEventListener("keydown",e),window.addEventListener("keyup",t),function(){window.removeEventListener("keydown",e),window.removeEventListener("keyup",t)}})),Object(c.useEffect)((function(){e.getBoardInstance(document.getElementById("board-image"))}),[]),Object(c.useEffect)((function(){g(function(){var e=parseFloat(getComputedStyle(document.documentElement).fontSize),t=document.getElementById("board");return(t.getBoundingClientRect().right-t.getBoundingClientRect().left)/e-15}())})),Object(r.jsx)("div",{className:"Board",id:"board",onClick:function(e){if(b&&!j){var t=parseFloat(getComputedStyle(document.documentElement).fontSize),n=(e.clientX-e.currentTarget.getBoundingClientRect().x)/t-7.5;s(n=(n=n<0?0:n)>v?v:n)}},children:Object(r.jsx)("img",{className:"board-image",id:"board-image",style:{left:"".concat(a,"rem")},src:m,alt:"board"})})},g=n(4),x=n.p+"static/media/bonus.99e1af99.wav",p=n.p+"static/media/fail.99214de6.wav",C=n.p+"static/media/kick.e27cac46.wav",k=n.p+"static/media/respawn.4a411067.wav",S=new b,y=["red","yellow","green"],E=["trajectory1","trajectory2","trajectory3"];var w=function(e){function t(e,t){return e=Math.ceil(e),t=Math.floor(t),Math.floor(Math.random()*(t-e+1))+e}var n=Object(c.useState)([]),a=Object(l.a)(n,2),s=a[0],i=a[1],o=Object(c.useState)(null),d=Object(l.a)(o,2),j=d[0],b=d[1],O=Object(c.useContext)(h).pause,m=Object(c.useContext)(h).active,w=Object(c.useContext)(h),N=w.restart,T=w.setRestart,B=Object(c.useContext)(h).cadence,I=Object(c.useContext)(h).soundEnabled,F=Object(g.a)(x),L=Object(l.a)(F,1)[0],R=Object(g.a)(p),P=Object(l.a)(R,1)[0],M=Object(g.a)(C),A=Object(l.a)(M,1)[0],G=Object(g.a)(k),z=Object(l.a)(G,1)[0];function D(e){"true"===I&&e()}function _(t){var n=t.animationName;function c(){var e=t.currentTarget.dataset.key;i(s.filter((function(t){return Number(t.key)!==Number(e)})))}function a(e){return{left:e.getBoundingClientRect().left,right:e.getBoundingClientRect().right}}"left-right-frames"===n?(e.incScore(),D(L),c()):n.includes("up-down-frames")?!function(){var e=a(t.target),n=a(j);return e.left<n.right&&e.left>n.left||e.right>n.left&&e.right<n.right}()?t.currentTarget.classList.add("fall"):(t.currentTarget.classList.remove("trajectory".concat(n[n.length-1])),t.currentTarget.offsetWidth,t.currentTarget.classList.add("trajectory".concat(n[n.length-1])),D(A)):(e.decTries(),D(P),c())}return S.setCallback((function(){var e=y[t(0,y.length-1)],n=E[t(0,E.length-1)];i([].concat(Object(u.a)(s),[{color:e,trajectory:n,key:Date.now()}])),D(z)})),Object(c.useEffect)((function(){m?O?(document.getElementById("appleContainer").classList.add("freeze"),S.stop()):(document.getElementById("appleContainer").classList.remove("freeze"),S.start()):(document.getElementById("appleContainer").classList.add("freeze"),S.stop())}),[m,O]),Object(c.useEffect)((function(){S.setCadence(B)}),[B]),Object(c.useEffect)((function(){N&&(i([]),T(!1))}),[N]),Object(r.jsxs)("div",{className:"PlayScreen",children:[Object(r.jsx)("div",{className:"dresser"}),Object(r.jsx)("div",{className:"stove"}),Object(r.jsx)("div",{className:"appleContainer",id:"appleContainer",children:s.map((function(e){return Object(r.jsx)(f,{onAnimationEnd:_,dataKey:e.key,color:e.color,trajectory:e.trajectory},e.key)}))}),Object(r.jsx)(v,{getBoardInstance:function(e){b(e)}})]})};n(24),n(25);var N=function(e){return Object(r.jsx)("button",{disabled:"true"===e.disabled,className:"Button",id:e.id,onClick:e.onClick,children:e.caption})};n(26);var T=function(e){return Object(r.jsxs)("div",{className:"ScoreBar",children:[Object(r.jsxs)("p",{children:["Your score :\xa0",Object(r.jsx)("span",{className:"score-amount",children:e.score})]}),Object(r.jsxs)("p",{children:["Tries left :\xa0",Object(r.jsx)("span",{className:"tries-amount",children:e.tries})]})]})};var B=function(e){var t=Object(c.useState)("Resume"),n=Object(l.a)(t,2),a=n[0],s=n[1],i=Object(c.useState)("Fullscreen"),o=Object(l.a)(i,2),u=o[0],d=o[1],j=Object(c.useContext)(h),b=j.pause,O=j.setPause,f=Object(c.useContext)(h),m=f.active,v=f.setActive,g=Object(c.useContext)(h).setRestart,x=Object(c.useContext)(h).setGameOver,p=Object(c.useContext)(h).setSettings;return Object(c.useEffect)((function(){s(b?"Resume":"Pause")}),[b]),Object(c.useEffect)((function(){function e(e){d("Fullscreen"===u?"Window":"Fullscreen")}return document.addEventListener("fullscreenchange",e),function(){document.removeEventListener("fullscreenchange",e)}})),Object(r.jsxs)("div",{className:"ControlsBox",children:[Object(r.jsx)(T,{score:e.score,tries:e.tries}),Object(r.jsxs)("div",{className:"buttons",children:[Object(r.jsx)(N,{disabled:"false",id:"newgame",caption:"New Game",onClick:function(){m&&g(!0),v(!0),O(!1)}}),Object(r.jsx)(N,{disabled:"".concat(!m),id:"pause",caption:a,onClick:function(){O(!b)}}),Object(r.jsx)(N,{disabled:"".concat(!m),id:"end",caption:"End",onClick:function(){v(!1),x(!0)}}),Object(r.jsx)(N,{disabled:"false",id:"settings",caption:"Settings",onClick:function(){m&&O(!0),p(!0)}}),Object(r.jsx)(N,{disabled:"false",id:"fullscreen",caption:u,onClick:function(){e.fullScreenToggler()}})]})]})};n(8),n(27);var I=function(e){var t=Object(c.useContext)(h).setGameOver,n=Object(c.useContext)(h).setRestart;return Object(r.jsx)("div",{className:"ModalContainer",children:Object(r.jsxs)("div",{className:"GameOver",children:[Object(r.jsx)("h2",{children:"Game Over"}),Object(r.jsxs)("p",{children:["Your score is : ",e.score]}),Object(r.jsx)(N,{disabled:"false",id:"gameOverOk",caption:"Ok",onClick:function(){n(!0),t(!1)}})]})})};n(28);var F=function(){var e=Object(c.useContext)(h).setSettings,t=Object(c.useContext)(h),n=t.cadence,a=t.setCadence,s=Object(c.useContext)(h),i=s.maxTries,o=s.setMaxTries,l=Object(c.useContext)(h),u=l.soundEnabled,d=l.setSoundEnabled;return Object(r.jsx)("div",{className:"ModalContainer",children:Object(r.jsxs)("div",{className:"Settings",children:[Object(r.jsx)("h2",{children:"Settings"}),Object(r.jsxs)("div",{children:[Object(r.jsxs)("div",{className:"control",children:[Object(r.jsx)("label",{htmlFor:"respawn",children:"Apples Respawn Frequency"}),Object(r.jsxs)("select",{id:"respawn",name:"respawn",value:n,onChange:function(e){a(e.target.value),localStorage.setItem("cadence",e.target.value)},children:[Object(r.jsx)("option",{value:"7000",children:"7 sec"}),Object(r.jsx)("option",{value:"10000",children:"10 sec"}),Object(r.jsx)("option",{value:"12000",children:"12 sec"})]})]}),Object(r.jsxs)("div",{className:"control",children:[Object(r.jsx)("label",{htmlFor:"respawn",children:"Max Tries"}),Object(r.jsxs)("select",{id:"respawn",name:"respawn",value:i,onChange:function(e){o(e.target.value),localStorage.setItem("tries",e.target.value)},children:[Object(r.jsx)("option",{value:"3",children:"3"}),Object(r.jsx)("option",{value:"5",children:"5"}),Object(r.jsx)("option",{value:"7",children:"7"})]})]}),Object(r.jsxs)("div",{className:"control",children:[Object(r.jsx)("label",{htmlFor:"sound",children:"Enable Sound"}),Object(r.jsx)("input",{id:"sound",type:"checkbox",name:"sound",checked:"true"===u,onChange:function(e){d(String(e.target.checked)),localStorage.setItem("sound",String(e.target.checked))}})]})]}),Object(r.jsx)(N,{disabled:"false",id:"settingsOk",caption:"Ok",onClick:function(){e(!1)}})]})})},L=n(7),R={tries:3,cadence:1e4,sound:"true"};var P=function(){var e=Object(c.useState)(0),t=Object(l.a)(e,2),n=t[0],a=t[1],s=Object(c.useState)(te("tries")),i=Object(l.a)(s,2),o=i[0],u=i[1],d=Object(c.useState)(te("cadence")),j=Object(l.a)(d,2),b=j[0],O=j[1],f=Object(c.useState)(te("tries")),m=Object(l.a)(f,2),v=m[0],g=m[1],x=Object(c.useState)(!0),p=Object(l.a)(x,2),C=p[0],k=p[1],S=Object(c.useState)(!1),y=Object(l.a)(S,2),E=y[0],N=y[1],T=Object(c.useState)(!0),P=Object(l.a)(T,2),M=P[0],A=P[1],G=Object(c.useState)(!1),z=Object(l.a)(G,2),D=z[0],_=z[1],J=Object(c.useState)(!1),K=Object(l.a)(J,2),Y=K[0],W=K[1],q=Object(c.useState)(te("sound")),H=Object(l.a)(q,2),V=H[0],X=H[1],Q=Object(c.useState)(!1),U=Object(l.a)(Q,2),Z=U[0],$=U[1],ee=Object(L.b)();function te(e){return localStorage.getItem(e)?localStorage.getItem(e):R[e]}return Object(c.useEffect)((function(){o||(N(!1),_(!0))}),[o]),Object(c.useEffect)((function(){M&&(a(0),u(v))}),[M]),Object(c.useEffect)((function(){u(v)}),[v]),Object(r.jsx)(L.a,{handle:ee,children:Object(r.jsx)(h.Provider,{value:{pause:C,setPause:k,active:E,setActive:N,restart:M,setRestart:A,gameOver:D,setGameOver:_,settings:Y,setSettings:W,maxTries:v,setMaxTries:g,cadence:b,setCadence:O,soundEnabled:V,setSoundEnabled:X},children:Object(r.jsxs)("div",{className:"Game",children:[Object(r.jsx)(w,{incScore:function(){a(n+1)},decTries:function(){u(o-1)}}),Object(r.jsx)(B,{score:n,tries:o,fullScreenToggler:function(){$(!Z),Z?ee.exit():ee.enter()}}),D&&Object(r.jsx)(I,{score:n}),Y&&Object(r.jsx)(F,{})]})})})},M=n.p+"static/media/rsSchoolJS.3e138c06.svg";n(29);var A=function(){return Object(r.jsxs)("div",{className:"Footer",children:[Object(r.jsxs)("p",{children:["Minsk, 2021, by"," ",Object(r.jsx)("a",{className:"github-link",href:"https://github.com/vitaly-kn",target:"_blank",rel:"noopener noreferrer",children:"Vitaly Kniazev"})]}),Object(r.jsx)("a",{href:"https://rs.school/react/",target:"_blank",rel:"noopener noreferrer",children:Object(r.jsx)("img",{className:"course-logo",src:M,alt:"React Course"})})]})};n(30);var G=function(){return Object(r.jsxs)("div",{className:"App",children:[Object(r.jsx)(o,{}),Object(r.jsx)(P,{}),Object(r.jsx)(A,{})]})},z=function(e){e&&e instanceof Function&&n.e(4).then(n.bind(null,34)).then((function(t){var n=t.getCLS,c=t.getFID,a=t.getFCP,s=t.getLCP,i=t.getTTFB;n(e),c(e),a(e),s(e),i(e)}))};i.a.render(Object(r.jsx)(a.a.StrictMode,{children:Object(r.jsx)(G,{})}),document.getElementById("root")),z()}],[[31,1,2]]]);
//# sourceMappingURL=main.8f41d7d7.chunk.js.map